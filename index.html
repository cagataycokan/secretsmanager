<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My AWS Demo App</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>Welcome to My AWS Demo App</h1>
    <p>This application lists your S3 buckets behind the scenes.</p>
    <button id="view-buckets" class="btn">View My S3 Buckets</button>

    <ul id="bucket-list"></ul>
  </div>

  <script>
    const btn = document.getElementById("view-buckets");
    const ul = document.getElementById("bucket-list");

    btn.addEventListener("click", () => {
      // Temizle
      ul.innerHTML = "";
      
      fetch("/buckets")
        .then(res => res.json())
        .then(data => {
          if(data.buckets && data.buckets.length > 0){
            data.buckets.forEach(name => {
              const li = document.createElement("li");
              li.textContent = name;
              ul.appendChild(li);
            });
          } else {
            ul.innerHTML = "<li>No buckets found</li>";
          }
        })
        .catch(err => {
          ul.innerHTML = "<li>Error fetching buckets</li>";
          console.error(err);
        });
    });
  </script>
</body>
</html>
